# 公共工具包 (pkg)

## 目录说明

该目录用于存放所有微服务可共用的工具包和组件。遵循 Go-Kratos 微服务项目规范，按功能模块划分子目录：

```
pkg/
├── auth/          # 认证相关
│   ├── jwt/       # JWT 工具
│   └── oauth/     # OAuth 认证
├── cache/         # 缓存组件
│   ├── redis/     # Redis 实现
│   └── memory/    # 内存缓存实现
├── constants/     # 公共常量定义
├── database/      # 数据库工具
│   ├── mysql/     # MySQL 工具
│   └── mongo/     # MongoDB 工具
├── errors/        # 错误处理
├── logger/        # 日志工具
├── middleware/    # 中间件
│   ├── cors/      # 跨域处理
│   ├── metrics/   # 监控指标
│   └── trace/     # 链路追踪
├── utils/         # 通用工具函数
│   ├── convert/   # 类型转换
│   ├── encrypt/   # 加密解密
│   ├── time/      # 时间处理
│   └── validator/ # 数据验证
└── queue/         # 消息队列
    ├── kafka/     # Kafka 实现
    └── rabbitmq/  # RabbitMQ 实现
```

## 使用规范

1. 包名规范
   - 使用小写字母
   - 简短且有意义
   - 避免使用下划线

2. 接口规范
   - 接口名使用大驼峰命名
   - 方法名应表达清晰的功能意图
   - 提供完整的接口文档

3. 错误处理
   - 统一使用 `pkg/errors` 包
   - 错误信息应清晰明确
   - 提供错误堆栈信息

4. 版本控制
   - 遵循语义化版本规范
   - 重大更新需要充分的测试和文档
   - 保持向后兼容性

5. 依赖管理
   - 明确声明外部依赖版本
   - 避免引入不必要的依赖
   - 定期更新依赖版本

6. 测试要求
   - 提供单元测试
   - 保持测试覆盖率
   - 包含基准测试（适用场景）

## 贡献指南

1. 代码风格
   - 遵循 Go 官方代码规范
   - 使用 gofmt 格式化代码
   - 通过 golint 检查

2. 文档要求
   - 提供详细的 README
   - 包含示例代码
   - 注释完整清晰

3. 提交规范
   - 清晰的提交信息
   - 适当的改动范围
   - 通过 CI 测试