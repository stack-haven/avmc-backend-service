syntax = "proto3";

package core.service.v1;

import "gnostic/openapi/v3/annotations.proto";
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/any.proto";
import "validate/validate.proto";
import "buf/validate/validate.proto";
import "common/pagination/pagination.proto";
import "common/enum/enum.proto";

option go_package = "backend-service/api/core/service/v1;v1";
option java_multiple_files = true;
option java_package = "core.service.v1";

service ClientService {
  // 创建客户端
	rpc CreateClient (CreateClientRequest) returns (CreateClientResponse);
  // 更新客户端
	rpc UpdateClient (UpdateClientRequest) returns (UpdateClientResponse);
  // 删除客户端
	rpc DeleteClient (DeleteClientRequest) returns (DeleteClientResponse);
  // 获取客户端
	rpc GetClient (GetClientRequest) returns (GetClientResponse);
  // 分页查询客户端
	rpc ListClient (pagination.PagingRequest) returns (ListClientResponse);
}

// 客户端信息
message Client {
  // 客户端ID
  uint32 id = 1;
  // 客户端名称
  optional string name = 2 [
    (validate.rules).string = {min_len: 1, max_len: 20}, 
    (buf.validate.field).string.min_len = 1,
    (buf.validate.field).string.max_len = 20,
    (gnostic.openapi.v3.property) = {description: "客户端名称"}
  ];
  // 排序值
  optional int32 sort = 3 [
    (buf.validate.field).int32.gte = 0,
    (buf.validate.field).int32.lte = 100,
    (gnostic.openapi.v3.property) = {description: "排序值", default: {number: 10}}
  ];
  // 客户端状态 1 激活 2 未激活 3 禁用
  optional enum.Status status = 4 [
    (validate.rules).enum.defined_only = true,
    (buf.validate.field).enum.defined_only = true,
    (gnostic.openapi.v3.property) = {description: "客户端状态 1 激活 2 未激活 3 禁用"}
  ];
  // 备注信息
  optional string remark = 5 [
    (buf.validate.field).string.max_len = 200,
    (gnostic.openapi.v3.property) = {description: "备注信息"}
  ];
  // 创建时间
  optional string created_at = 6 [
    (gnostic.openapi.v3.property) = {description: "创建时间"}
  ];
  // 更新时间
  optional string updated_at = 7 [
    (gnostic.openapi.v3.property) = {description: "更新时间"}
  ];
}

// 创建客户端请求
message CreateClientRequest {
  Client client = 1;
  // 操作人ID
  uint32 operator_id = 2 [(buf.validate.field).uint32.gt = 0];
}

// 创建客户端响应
message CreateClientResponse {
  // 客户端ID
  uint32 id = 1;
  // 客户端名称
  string name = 2;
}

// 更新客户端请求
message UpdateClientRequest {
  uint32 id = 1;
  Client client = 2;
  // 操作人ID
  uint32 operator_id = 3 [(buf.validate.field).uint32.gt = 0];
}
// 更新客户端响应
message UpdateClientResponse {
  // 客户端ID
  uint32 id = 1;
}

// 删除客户端请求
message DeleteClientRequest {
  // 客户端ID
  uint32 id = 1 [(buf.validate.field).uint32.gt = 0];
  // 操作人ID
  uint32 operator_id = 2 [(buf.validate.field).uint32.gt = 0];
}
// 删除客户端响应
message DeleteClientResponse {
  // 客户端ID
  uint32 id = 1;
}

// 获取客户端请求
message GetClientRequest {
  // 客户端ID
  uint32 id = 1 [(buf.validate.field).uint32.gt = 0];
}
// 获取客户端响应
message GetClientResponse {
  // 客户端信息
  Client client = 1;
}

// 分页查询客户端响应
message ListClientResponse {
  // 客户端列表
  repeated Client items = 1;
  // 总数
  int32 total = 2;
}